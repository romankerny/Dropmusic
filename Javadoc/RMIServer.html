<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="pt">
<head>
<!-- Generated by javadoc (1.8.0_191) on Sat Oct 27 20:53:29 WEST 2018 -->
<title>RMIServer</title>
<meta name="date" content="2018-10-27">
<link rel="stylesheet" type="text/css" href="stylesheet.css" title="Style">
<script type="text/javascript" src="script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="RMIServer";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":9,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10,"i16":10,"i17":10,"i18":10};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="deprecated-list.html">Deprecated</a></li>
<li><a href="index-files/index-1.html">Index</a></li>
<li><a href="help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="RMIClientInterface.html" title="interface in &lt;Unnamed&gt;"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="RMIServerInterface.html" title="interface in &lt;Unnamed&gt;"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="index.html?RMIServer.html" target="_top">Frames</a></li>
<li><a href="RMIServer.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<h2 title="Class RMIServer" class="title">Class RMIServer</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>java.rmi.server.RemoteObject</li>
<li>
<ul class="inheritance">
<li>java.rmi.server.RemoteServer</li>
<li>
<ul class="inheritance">
<li>java.rmi.server.UnicastRemoteObject</li>
<li>
<ul class="inheritance">
<li>RMIServer</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd>java.io.Serializable, java.rmi.Remote, <a href="RMIServerInterface.html" title="interface in &lt;Unnamed&gt;">RMIServerInterface</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="typeNameLabel">RMIServer</span>
extends java.rmi.server.UnicastRemoteObject
implements <a href="RMIServerInterface.html" title="interface in &lt;Unnamed&gt;">RMIServerInterface</a></pre>
<div class="block">RMIServer contains all methods that RMI Client can call via remote interface.
 The RMIServer interface is named 'rmiserver' and the registry runs on port 1099.

 This class contains a concurrentHaspMap that holds the correspondence between client's emails and the corresponding
 RMI Interfaces. It's mainly used to control which users are logged to the Server and comes in hand when the server
 needs to call the method printOnClient() via it's interface.

 The Server has 2 main UDP ports:
  - 5213 where it sends Datagram Packets
  - 5214 where it receives Datagram Packets

  The class also contains an array of Strings that has all the UUID hashes that identify MulticastServers in an
  unique way.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="serialized-form.html#RMIServer">Serialized Form</a></dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="RMIServer.html#globalCounter">globalCounter</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.util.ArrayList&lt;java.lang.String&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="RMIServer.html#multicastHashes">multicastHashes</a></span></code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="fields.inherited.from.class.java.rmi.server.RemoteObject">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;java.rmi.server.RemoteObject</h3>
<code>ref</code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="RMIServer.html#RMIServer--">RMIServer</a></span>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="RMIServer.html#addAlbum-java.lang.String-java.lang.String-java.lang.String-java.lang.String-java.lang.String-">addAlbum</a></span>(java.lang.String&nbsp;artist,
        java.lang.String&nbsp;albumTitle,
        java.lang.String&nbsp;description,
        java.lang.String&nbsp;genre,
        java.lang.String&nbsp;email)</code>
<div class="block">Request  -> flag | id; type | addalb; art | aaaa; alb | bbbb; description | dddd; genre | gggg; email | dddd;
  Response -> flag | id; type | addalb; email | ddd; result |(y/n); notif_count | n; notif | email; notif | email; [etc...]; msg | mmmmm;</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="RMIServer.html#addArtist-java.lang.String-java.lang.String-java.lang.String-">addArtist</a></span>(java.lang.String&nbsp;artist,
         java.lang.String&nbsp;details,
         java.lang.String&nbsp;email)</code>
<div class="block">Request  -> flag | id; type | addart; name | nnnn; details | dddd; email | dddd;
 Rsponse -> flag | id; type | addart; email | dddd; result | (y/n); notif_count | n; notif | email; notif | email; [etc...]; msg | mmmmm;

 Adds artist and notifies users if they that have edited the artist work in the past</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="RMIServer.html#addMusic-java.lang.String-java.lang.String-java.lang.String-java.lang.String-">addMusic</a></span>(java.lang.String&nbsp;musicTitle,
        java.lang.String&nbsp;track,
        java.lang.String&nbsp;albumTitle,
        java.lang.String&nbsp;email)</code>
<div class="block">Request  -> flag | id; type | addmusic; alb | bbbb; title | tttt; track | n; email | dddd;
 Response -> flag | id; type | addmusic; title | tttt; email | dddd; result | (y/n); notif_count | n; notif | email; notif | email; [etc...] msg | mmmmm;</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="RMIServer.html#downloadMusic-java.lang.String-java.lang.String-java.lang.String-">downloadMusic</a></span>(java.lang.String&nbsp;title,
             java.lang.String&nbsp;uploader,
             java.lang.String&nbsp;email)</code>
<div class="block">Request  -> flag | id; type | requestTCPConnection; operation | download; email | eeee;
 Response -> flag | id; type | requestTCPConnection; operation | download; email | eeee; result | y; ip| iiii; port | pppp;
 Response -> flag | id; type | requestTCPConnection; operation | download; email | eeee; result | n; msg | mmmmmmmmm;

 RMI and multicast need to establish some things before a download can happen

 int n_responses it's the number of negative Multicast answers

 When sending download packets the RMI will wait in maximum for rmiServer.multicastHashes.size()
 if n_responses == rmiServer.multicastHashes.size() it means that there isn't an online MulticastServer that has
 the music with @param title with a file available to download</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="RMIServer.html#isAlive--">isAlive</a></span>()</code>
<div class="block">Method to be used between RMI Main and RMI Backup
 The Backup will be constantly calling this method with the RMIMain's Interface</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="RMIServer.html#login-java.lang.String-java.lang.String-RMIClientInterface-">login</a></span>(java.lang.String&nbsp;email,
     java.lang.String&nbsp;password,
     <a href="RMIClientInterface.html" title="interface in &lt;Unnamed&gt;">RMIClientInterface</a>&nbsp;client)</code>
<div class="block">Sends to Multicast:
 Request  -> flag | id; type | login; email | eeee; password | pppp;

 Receives from Multicast:
 Response -> flag | id; type | login; result | (y/n); email | eeee; password | pppp; notification_count | n; notif_x | notif; msg | mmmmmm;

 If the op. is successful the @param client is added to clients concurrentHashMap</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="RMIServer.html#logout-java.lang.String-">logout</a></span>(java.lang.String&nbsp;email)</code>
<div class="block">Simply removes the clientInterface from the clients concurrentHashMap</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="RMIServer.html#main-java.lang.String:A-">main</a></span>(java.lang.String[]&nbsp;args)</code>&nbsp;</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="RMIServer.html#rateAlbum-int-java.lang.String-java.lang.String-java.lang.String-">rateAlbum</a></span>(int&nbsp;stars,
         java.lang.String&nbsp;albumName,
         java.lang.String&nbsp;review,
         java.lang.String&nbsp;email)</code>
<div class="block">flag | id; type | critic; album | name; critic | blabla; rate | n; email | eeee;
 flag | id; type | critic; result | (y/n); album | name; critic | blabla; rate | n; msg | mmmmm;</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="RMIServer.html#receiveUDPDatagram-java.lang.String-">receiveUDPDatagram</a></span>(java.lang.String&nbsp;rspToRetry)</code>
<div class="block">Try's to receive a Datagram via Multicast
 If socket is activated for + than 5 seconds without getting an answer form Multicast the setSoTimeout() creates an exception
 that re-sends the Datagram to Multicast that was supposed to generate the response.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="RMIServer.html#refreshMulticastHashes--">refreshMulticastHashes</a></span>()</code>
<div class="block">RMI sends:
 Request  -> flag | id; type | connectionrequest;

 Multicast responds:
 Response -> flag | id; type | ack; hash | hhhh;</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="RMIServer.html#register-java.lang.String-java.lang.String-">register</a></span>(java.lang.String&nbsp;name,
        java.lang.String&nbsp;password)</code>
<div class="block">Receives a name and password
 creates datagram with the following protocol:

 Sends to Multicast:
 Request  -> flag | id; type | register; email | eeee; password | pppp;

 Receives from Multicast:
 Response -> flag | id; type | register; result | (y/n); email | eeee; password | pppp; msg | mmmmmm;

 If result | y -> successes
 If result | n -> failed, returns an error message to RMIClient</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="RMIServer.html#regularToEditor-java.lang.String-java.lang.String-">regularToEditor</a></span>(java.lang.String&nbsp;editor,
               java.lang.String&nbsp;regular)</code>
<div class="block">Request  -> flag | id; type | privilege; user1 | username; user2; username;
 Response -> flag | id; type | privilege; result | (y/n): user1 | username; user2 | username; msg | mmmmmmmm;

 Try's to cast @param regular to editor
 If the op. is successful the notification to the @param editor comes along in the UDP Datagram

 the client with email == @param editor in clients concurrentHashMap gets printed w/ printOnClient() method</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="RMIServer.html#search-java.lang.String-java.lang.String-">search</a></span>(java.lang.String&nbsp;param,
      java.lang.String&nbsp;keyword)</code>
<div class="block">Request  -> flag | id; type | details; param | (art, gen, tit); keyword | kkkk;
 Response -> flag | id; type | details; result | (y/n); param | (art, gen, tit); keyword | kkkk; item_count | n; iten_x_name | name; [...] msg | mmmmmm;</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="RMIServer.html#sendUDPDatagram-java.lang.String-">sendUDPDatagram</a></span>(java.lang.String&nbsp;resp)</code>
<div class="block">Using round-robin algorithm picks an hash code to concatenate with the @param resp
 then calls sendUDPDatagramGeneral() to send the protocol message.</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="RMIServer.html#sendUDPDatagramGeneral-java.lang.String-">sendUDPDatagramGeneral</a></span>(java.lang.String&nbsp;resp)</code>
<div class="block">Creates a multicastSocket and sends a Datagram packet with
  some protocol instruction.</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="RMIServer.html#share-java.lang.String-java.lang.String-java.lang.String-">share</a></span>(java.lang.String&nbsp;title,
     java.lang.String&nbsp;shareTo,
     java.lang.String&nbsp;uploader)</code>
<div class="block">Request  -> flag | id; type | share; title | tttt; shareTo | sssss; uploader | uuuuuu;
 Response -> flag | id; type | share; result | (y/n): title | ttttt; shareTo | ssssss; uploader | uuuuuu; msg | mmmmmm;

 shares a music with the user with the email == shareTo</div>
</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="RMIServer.html#subscribe-java.lang.String-RMIClientInterface-">subscribe</a></span>(java.lang.String&nbsp;email,
         <a href="RMIClientInterface.html" title="interface in &lt;Unnamed&gt;">RMIClientInterface</a>&nbsp;clientInterface)</code>
<div class="block">When a user calls login() w/ success
 It's @param clientInterface is added to the clients concurrentHashMap</div>
</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="RMIServer.html#uploadMusic-java.lang.String-java.lang.String-">uploadMusic</a></span>(java.lang.String&nbsp;title,
           java.lang.String&nbsp;uploader)</code>
<div class="block">Request  -> flag | id; type | requestTCPConnection; operation | upload; title | tttt; uploader | uuuu; email | eeee
 Response -> flag | id; type | requestTCPConnection; operation | upload; email | eeee; result | y; port | pppp;
 Response -> flag | id; type | requestTCPConnection; operation | upload; email | eeee; result | n; msg | mmmmmmmmm;</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.rmi.server.UnicastRemoteObject">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.rmi.server.UnicastRemoteObject</h3>
<code>clone, exportObject, exportObject, exportObject, unexportObject</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.rmi.server.RemoteServer">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.rmi.server.RemoteServer</h3>
<code>getClientHost, getLog, setLog</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.rmi.server.RemoteObject">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.rmi.server.RemoteObject</h3>
<code>equals, getRef, hashCode, toString, toStub</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>finalize, getClass, notify, notifyAll, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="multicastHashes">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>multicastHashes</h4>
<pre>public&nbsp;java.util.ArrayList&lt;java.lang.String&gt; multicastHashes</pre>
</li>
</ul>
<a name="globalCounter">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>globalCounter</h4>
<pre>public static&nbsp;int globalCounter</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="RMIServer--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>RMIServer</h4>
<pre>public&nbsp;RMIServer()
          throws java.rmi.RemoteException</pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.rmi.RemoteException</code></dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="sendUDPDatagram-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sendUDPDatagram</h4>
<pre>public&nbsp;void&nbsp;sendUDPDatagram(java.lang.String&nbsp;resp)</pre>
<div class="block">Using round-robin algorithm picks an hash code to concatenate with the @param resp
 then calls sendUDPDatagramGeneral() to send the protocol message.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>resp</code> - - protocol instruction to send</dd>
</dl>
</li>
</ul>
<a name="sendUDPDatagramGeneral-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sendUDPDatagramGeneral</h4>
<pre>public&nbsp;void&nbsp;sendUDPDatagramGeneral(java.lang.String&nbsp;resp)</pre>
<div class="block">Creates a multicastSocket and sends a Datagram packet with
  some protocol instruction.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>resp</code> - - protocol instruction to send</dd>
</dl>
</li>
</ul>
<a name="receiveUDPDatagram-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>receiveUDPDatagram</h4>
<pre>public&nbsp;java.lang.String&nbsp;receiveUDPDatagram(java.lang.String&nbsp;rspToRetry)</pre>
<div class="block">Try's to receive a Datagram via Multicast
 If socket is activated for + than 5 seconds without getting an answer form Multicast the setSoTimeout() creates an exception
 that re-sends the Datagram to Multicast that was supposed to generate the response.
 The method that calls this function will be locked until the answer packet it's waiting for is received.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>rspToRetry</code> - </dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>received Datagram</dd>
</dl>
</li>
</ul>
<a name="register-java.lang.String-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>register</h4>
<pre>public&nbsp;java.lang.String&nbsp;register(java.lang.String&nbsp;name,
                                 java.lang.String&nbsp;password)</pre>
<div class="block">Receives a name and password
 creates datagram with the following protocol:

 Sends to Multicast:
 Request  -> flag | id; type | register; email | eeee; password | pppp;

 Receives from Multicast:
 Response -> flag | id; type | register; result | (y/n); email | eeee; password | pppp; msg | mmmmmm;

 If result | y -> successes
 If result | n -> failed, returns an error message to RMIClient</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="RMIServerInterface.html#register-java.lang.String-java.lang.String-">register</a></code>&nbsp;in interface&nbsp;<code><a href="RMIServerInterface.html" title="interface in &lt;Unnamed&gt;">RMIServerInterface</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>name</code> - </dd>
<dd><code>password</code> - </dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>rsp to Client with result</dd>
</dl>
</li>
</ul>
<a name="subscribe-java.lang.String-RMIClientInterface-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>subscribe</h4>
<pre>public&nbsp;void&nbsp;subscribe(java.lang.String&nbsp;email,
                      <a href="RMIClientInterface.html" title="interface in &lt;Unnamed&gt;">RMIClientInterface</a>&nbsp;clientInterface)</pre>
<div class="block">When a user calls login() w/ success
 It's @param clientInterface is added to the clients concurrentHashMap</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="RMIServerInterface.html#subscribe-java.lang.String-RMIClientInterface-">subscribe</a></code>&nbsp;in interface&nbsp;<code><a href="RMIServerInterface.html" title="interface in &lt;Unnamed&gt;">RMIServerInterface</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>email</code> - </dd>
<dd><code>clientInterface</code> - </dd>
</dl>
</li>
</ul>
<a name="logout-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>logout</h4>
<pre>public&nbsp;java.lang.String&nbsp;logout(java.lang.String&nbsp;email)</pre>
<div class="block">Simply removes the clientInterface from the clients concurrentHashMap</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="RMIServerInterface.html#logout-java.lang.String-">logout</a></code>&nbsp;in interface&nbsp;<code><a href="RMIServerInterface.html" title="interface in &lt;Unnamed&gt;">RMIServerInterface</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>email</code> - </dd>
<dt><span class="returnLabel">Returns:</span></dt>
</dl>
</li>
</ul>
<a name="login-java.lang.String-java.lang.String-RMIClientInterface-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>login</h4>
<pre>public&nbsp;java.lang.String&nbsp;login(java.lang.String&nbsp;email,
                              java.lang.String&nbsp;password,
                              <a href="RMIClientInterface.html" title="interface in &lt;Unnamed&gt;">RMIClientInterface</a>&nbsp;client)
                       throws java.rmi.RemoteException</pre>
<div class="block">Sends to Multicast:
 Request  -> flag | id; type | login; email | eeee; password | pppp;

 Receives from Multicast:
 Response -> flag | id; type | login; result | (y/n); email | eeee; password | pppp; notification_count | n; notif_x | notif; msg | mmmmmm;

 If the op. is successful the @param client is added to clients concurrentHashMap</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="RMIServerInterface.html#login-java.lang.String-java.lang.String-RMIClientInterface-">login</a></code>&nbsp;in interface&nbsp;<code><a href="RMIServerInterface.html" title="interface in &lt;Unnamed&gt;">RMIServerInterface</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>email</code> - </dd>
<dd><code>password</code> - </dd>
<dd><code>client</code> - </dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>rsp to Client</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.rmi.RemoteException</code></dd>
</dl>
</li>
</ul>
<a name="regularToEditor-java.lang.String-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>regularToEditor</h4>
<pre>public&nbsp;java.lang.String&nbsp;regularToEditor(java.lang.String&nbsp;editor,
                                        java.lang.String&nbsp;regular)</pre>
<div class="block">Request  -> flag | id; type | privilege; user1 | username; user2; username;
 Response -> flag | id; type | privilege; result | (y/n): user1 | username; user2 | username; msg | mmmmmmmm;

 Try's to cast @param regular to editor
 If the op. is successful the notification to the @param editor comes along in the UDP Datagram

 the client with email == @param editor in clients concurrentHashMap gets printed w/ printOnClient() method</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="RMIServerInterface.html#regularToEditor-java.lang.String-java.lang.String-">regularToEditor</a></code>&nbsp;in interface&nbsp;<code><a href="RMIServerInterface.html" title="interface in &lt;Unnamed&gt;">RMIServerInterface</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>editor</code> - </dd>
<dd><code>regular</code> - </dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>rsp to Client that called the function</dd>
</dl>
</li>
</ul>
<a name="uploadMusic-java.lang.String-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>uploadMusic</h4>
<pre>public&nbsp;java.lang.String&nbsp;uploadMusic(java.lang.String&nbsp;title,
                                    java.lang.String&nbsp;uploader)</pre>
<div class="block">Request  -> flag | id; type | requestTCPConnection; operation | upload; title | tttt; uploader | uuuu; email | eeee
 Response -> flag | id; type | requestTCPConnection; operation | upload; email | eeee; result | y; port | pppp;
 Response -> flag | id; type | requestTCPConnection; operation | upload; email | eeee; result | n; msg | mmmmmmmmm;</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="RMIServerInterface.html#uploadMusic-java.lang.String-java.lang.String-">uploadMusic</a></code>&nbsp;in interface&nbsp;<code><a href="RMIServerInterface.html" title="interface in &lt;Unnamed&gt;">RMIServerInterface</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>title</code> - </dd>
<dd><code>uploader</code> - </dd>
<dt><span class="returnLabel">Returns:</span></dt>
</dl>
</li>
</ul>
<a name="downloadMusic-java.lang.String-java.lang.String-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>downloadMusic</h4>
<pre>public&nbsp;java.lang.String&nbsp;downloadMusic(java.lang.String&nbsp;title,
                                      java.lang.String&nbsp;uploader,
                                      java.lang.String&nbsp;email)</pre>
<div class="block">Request  -> flag | id; type | requestTCPConnection; operation | download; email | eeee;
 Response -> flag | id; type | requestTCPConnection; operation | download; email | eeee; result | y; ip| iiii; port | pppp;
 Response -> flag | id; type | requestTCPConnection; operation | download; email | eeee; result | n; msg | mmmmmmmmm;

 RMI and multicast need to establish some things before a download can happen

 int n_responses it's the number of negative Multicast answers

 When sending download packets the RMI will wait in maximum for rmiServer.multicastHashes.size()
 if n_responses == rmiServer.multicastHashes.size() it means that there isn't an online MulticastServer that has
 the music with @param title with a file available to download</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="RMIServerInterface.html#downloadMusic-java.lang.String-java.lang.String-java.lang.String-">downloadMusic</a></code>&nbsp;in interface&nbsp;<code><a href="RMIServerInterface.html" title="interface in &lt;Unnamed&gt;">RMIServerInterface</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>title</code> - </dd>
<dd><code>uploader</code> - </dd>
<dd><code>email</code> - </dd>
<dt><span class="returnLabel">Returns:</span></dt>
</dl>
</li>
</ul>
<a name="share-java.lang.String-java.lang.String-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>share</h4>
<pre>public&nbsp;java.lang.String&nbsp;share(java.lang.String&nbsp;title,
                              java.lang.String&nbsp;shareTo,
                              java.lang.String&nbsp;uploader)</pre>
<div class="block">Request  -> flag | id; type | share; title | tttt; shareTo | sssss; uploader | uuuuuu;
 Response -> flag | id; type | share; result | (y/n): title | ttttt; shareTo | ssssss; uploader | uuuuuu; msg | mmmmmm;

 shares a music with the user with the email == shareTo</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="RMIServerInterface.html#share-java.lang.String-java.lang.String-java.lang.String-">share</a></code>&nbsp;in interface&nbsp;<code><a href="RMIServerInterface.html" title="interface in &lt;Unnamed&gt;">RMIServerInterface</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>title</code> - </dd>
<dd><code>shareTo</code> - </dd>
<dd><code>uploader</code> - </dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>result of the operation</dd>
</dl>
</li>
</ul>
<a name="rateAlbum-int-java.lang.String-java.lang.String-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>rateAlbum</h4>
<pre>public&nbsp;java.lang.String&nbsp;rateAlbum(int&nbsp;stars,
                                  java.lang.String&nbsp;albumName,
                                  java.lang.String&nbsp;review,
                                  java.lang.String&nbsp;email)</pre>
<div class="block">flag | id; type | critic; album | name; critic | blabla; rate | n; email | eeee;
 flag | id; type | critic; result | (y/n); album | name; critic | blabla; rate | n; msg | mmmmm;</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="RMIServerInterface.html#rateAlbum-int-java.lang.String-java.lang.String-java.lang.String-">rateAlbum</a></code>&nbsp;in interface&nbsp;<code><a href="RMIServerInterface.html" title="interface in &lt;Unnamed&gt;">RMIServerInterface</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>stars</code> - </dd>
<dd><code>albumName</code> - </dd>
<dd><code>review</code> - </dd>
<dd><code>email</code> - </dd>
<dt><span class="returnLabel">Returns:</span></dt>
</dl>
</li>
</ul>
<a name="search-java.lang.String-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>search</h4>
<pre>public&nbsp;java.lang.String&nbsp;search(java.lang.String&nbsp;param,
                               java.lang.String&nbsp;keyword)</pre>
<div class="block">Request  -> flag | id; type | details; param | (art, gen, tit); keyword | kkkk;
 Response -> flag | id; type | details; result | (y/n); param | (art, gen, tit); keyword | kkkk; item_count | n; iten_x_name | name; [...] msg | mmmmmm;</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="RMIServerInterface.html#search-java.lang.String-java.lang.String-">search</a></code>&nbsp;in interface&nbsp;<code><a href="RMIServerInterface.html" title="interface in &lt;Unnamed&gt;">RMIServerInterface</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>param</code> - </dd>
<dd><code>keyword</code> - </dd>
<dt><span class="returnLabel">Returns:</span></dt>
</dl>
</li>
</ul>
<a name="addArtist-java.lang.String-java.lang.String-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addArtist</h4>
<pre>public&nbsp;java.lang.String&nbsp;addArtist(java.lang.String&nbsp;artist,
                                  java.lang.String&nbsp;details,
                                  java.lang.String&nbsp;email)
                           throws java.rmi.RemoteException</pre>
<div class="block">Request  -> flag | id; type | addart; name | nnnn; details | dddd; email | dddd;
 Rsponse -> flag | id; type | addart; email | dddd; result | (y/n); notif_count | n; notif | email; notif | email; [etc...]; msg | mmmmm;

 Adds artist and notifies users if they that have edited the artist work in the past</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="RMIServerInterface.html#addArtist-java.lang.String-java.lang.String-java.lang.String-">addArtist</a></code>&nbsp;in interface&nbsp;<code><a href="RMIServerInterface.html" title="interface in &lt;Unnamed&gt;">RMIServerInterface</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>artist</code> - </dd>
<dd><code>details</code> - </dd>
<dd><code>email</code> - </dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.rmi.RemoteException</code></dd>
</dl>
</li>
</ul>
<a name="addAlbum-java.lang.String-java.lang.String-java.lang.String-java.lang.String-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addAlbum</h4>
<pre>public&nbsp;java.lang.String&nbsp;addAlbum(java.lang.String&nbsp;artist,
                                 java.lang.String&nbsp;albumTitle,
                                 java.lang.String&nbsp;description,
                                 java.lang.String&nbsp;genre,
                                 java.lang.String&nbsp;email)
                          throws java.rmi.RemoteException</pre>
<div class="block">Request  -> flag | id; type | addalb; art | aaaa; alb | bbbb; description | dddd; genre | gggg; email | dddd;
  Response -> flag | id; type | addalb; email | ddd; result |(y/n); notif_count | n; notif | email; notif | email; [etc...]; msg | mmmmm;</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="RMIServerInterface.html#addAlbum-java.lang.String-java.lang.String-java.lang.String-java.lang.String-java.lang.String-">addAlbum</a></code>&nbsp;in interface&nbsp;<code><a href="RMIServerInterface.html" title="interface in &lt;Unnamed&gt;">RMIServerInterface</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>artist</code> - </dd>
<dd><code>albumTitle</code> - </dd>
<dd><code>description</code> - </dd>
<dd><code>genre</code> - </dd>
<dd><code>email</code> - </dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.rmi.RemoteException</code></dd>
</dl>
</li>
</ul>
<a name="addMusic-java.lang.String-java.lang.String-java.lang.String-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addMusic</h4>
<pre>public&nbsp;java.lang.String&nbsp;addMusic(java.lang.String&nbsp;musicTitle,
                                 java.lang.String&nbsp;track,
                                 java.lang.String&nbsp;albumTitle,
                                 java.lang.String&nbsp;email)
                          throws java.rmi.RemoteException</pre>
<div class="block">Request  -> flag | id; type | addmusic; alb | bbbb; title | tttt; track | n; email | dddd;
 Response -> flag | id; type | addmusic; title | tttt; email | dddd; result | (y/n); notif_count | n; notif | email; notif | email; [etc...] msg | mmmmm;</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="RMIServerInterface.html#addMusic-java.lang.String-java.lang.String-java.lang.String-java.lang.String-">addMusic</a></code>&nbsp;in interface&nbsp;<code><a href="RMIServerInterface.html" title="interface in &lt;Unnamed&gt;">RMIServerInterface</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>musicTitle</code> - </dd>
<dd><code>track</code> - </dd>
<dd><code>albumTitle</code> - </dd>
<dd><code>email</code> - </dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.rmi.RemoteException</code></dd>
</dl>
</li>
</ul>
<a name="isAlive--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isAlive</h4>
<pre>public&nbsp;boolean&nbsp;isAlive()
                throws java.rmi.RemoteException</pre>
<div class="block">Method to be used between RMI Main and RMI Backup
 The Backup will be constantly calling this method with the RMIMain's Interface</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="RMIServerInterface.html#isAlive--">isAlive</a></code>&nbsp;in interface&nbsp;<code><a href="RMIServerInterface.html" title="interface in &lt;Unnamed&gt;">RMIServerInterface</a></code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.rmi.RemoteException</code></dd>
</dl>
</li>
</ul>
<a name="refreshMulticastHashes--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>refreshMulticastHashes</h4>
<pre>public&nbsp;void&nbsp;refreshMulticastHashes()
                            throws java.io.IOException</pre>
<div class="block">RMI sends:
 Request  -> flag | id; type | connectionrequest;

 Multicast responds:
 Response -> flag | id; type | ack; hash | hhhh;</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
<a name="main-java.lang.String:A-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>main</h4>
<pre>public static&nbsp;void&nbsp;main(java.lang.String[]&nbsp;args)
                 throws java.rmi.NotBoundException,
                        java.rmi.AlreadyBoundException,
                        java.io.IOException</pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.rmi.NotBoundException</code></dd>
<dd><code>java.rmi.AlreadyBoundException</code></dd>
<dd><code>java.io.IOException</code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="deprecated-list.html">Deprecated</a></li>
<li><a href="index-files/index-1.html">Index</a></li>
<li><a href="help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="RMIClientInterface.html" title="interface in &lt;Unnamed&gt;"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="RMIServerInterface.html" title="interface in &lt;Unnamed&gt;"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="index.html?RMIServer.html" target="_top">Frames</a></li>
<li><a href="RMIServer.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
